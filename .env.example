# ============================================
# Grimoire Engine Backend - Environment Configuration
# ============================================
# Copy this file to .env and update with your values
# Never commit .env to version control!

# ============================================
# Application Configuration
# ============================================
# Environment: development, staging, production
APP_ENV=development

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Use DEBUG for development, INFO for production
LOG_LEVEL=INFO

# ============================================
# Database Configuration
# ============================================
# SQLite database path (relative to project root)
# For Docker: Use /app/data/grimoire.db
# For local dev: Use ./data/grimoire.db
DATABASE_URL=sqlite+aiosqlite:///./data/grimoire.db

# ============================================
# GitHub Configuration
# ============================================
# Webhook secret for validating GitHub webhook signatures
# Generate a secure random string and configure in GitHub webhook settings
# Example: openssl rand -hex 32
GITHUB_WEBHOOK_SECRET=my-webhook-secret
# 0f1dd14e843e2144e3de50544a5e3796e40fba9f
# GitHub Personal Access Token or GitHub App token
# Required scopes: repo (for private repos) or public_repo (for public repos)
# Create at: https://github.com/settings/tokens
GITHUB_API_TOKEN=your_github_token_here

# ============================================
# API Configuration
# ============================================
# Host to bind the API server
# Use 0.0.0.0 to accept connections from any network interface
# Use 127.0.0.1 for localhost only
API_HOST=0.0.0.0

# Port to run the API server
# Default: 8000
API_PORT=8000

# ============================================
# JWT Authentication Configuration
# ============================================
# Secret key for signing JWT tokens
# Generate with: openssl rand -hex 32
# IMPORTANT: Keep this secret and never commit to version control!
# Example: 09d25e094faa6ca2556c818166b7a9563b93f7099f6f0f4caa6cf63b88e8d3e7
SECRET_KEY=your_secret_key_here

# JWT algorithm (HS256 is recommended for symmetric signing)
ALGORITHM=HS256

# Access token expiration time in minutes (1440 = 24 hours)
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# ============================================
# CORS Configuration
# ============================================
# Allowed origins for CORS (comma-separated list)
# Use * for development to allow all origins
# In production, specify exact origins for security
# Example: https://app.example.com,https://admin.example.com
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# ============================================
# LLM Configuration (for spell generation)
# ============================================
# Enable automatic spell creation when no matches are found
AUTO_CREATE_SPELLS=false

# LLM provider: openai, anthropic, or mock
# Use "mock" for demos/testing without API costs (no API key required)
LLM_PROVIDER=openai

# LLM model to use
# OpenAI: gpt-4, gpt-4-turbo, gpt-3.5-turbo
# Anthropic: claude-3-5-sonnet-20241022, claude-3-opus-20240229
# Mock: any value (ignored)
LLM_MODEL=gpt-4-turbo

# API keys (only required for openai/anthropic providers, not needed for mock)
OPENAI_API_KEY=your_openai_key_here
ANTHROPIC_API_KEY=your_anthropic_key_here

# LLM request timeout in seconds
LLM_TIMEOUT=30

# Maximum tokens for LLM response
LLM_MAX_TOKENS=1000

# Patch generation timeout in seconds (for spell application)
PATCH_GENERATION_TIMEOUT=30

# Default maximum number of files to modify in a patch
PATCH_MAX_FILES_DEFAULT=3

# ============================================
# Optional: Future Extension Points
# ============================================
# Uncomment and configure when implementing these features

# Vector Database Configuration (for semantic spell matching)
# VECTOR_DB_URL=postgresql://user:pass@localhost:5432/grimoire
# VECTOR_DB_TYPE=pgvector  # Options: pgvector, qdrant, pinecone

# Sandbox Runner Configuration (for code execution)
# SANDBOX_TYPE=docker  # Options: docker, firecracker
# SANDBOX_TIMEOUT=30  # Execution timeout in seconds
# SANDBOX_MEMORY_LIMIT=512m  # Memory limit for sandbox

# MCP Analyzer Configuration (for code analysis)
# MCP_SERVER_URL=http://localhost:9000
# MCP_ANALYZERS=pylint,mypy,ruff  # Comma-separated list

# Kiro Integration Configuration (for IDE features)
# KIRO_API_URL=http://localhost:7000
# KIRO_API_KEY=your_kiro_api_key_here
